version: 2

models:
  - name: stg_mdm__golden_member
    description: >
      Staging model for MDM-mastered member golden records.
      Contains survivorship-resolved demographics from all source systems.
    columns:
      - name: golden_member_id
        description: "{{ doc('golden_member_id') }}"
        tests:
          - not_null
          - unique
      - name: first_name
        description: "Survivorship-resolved first name"
      - name: last_name
        description: "Survivorship-resolved last name"
      - name: date_of_birth
        description: "Survivorship-resolved date of birth"
      - name: gender_code
        description: "Gender code (M/F/U)"
      - name: gender
        description: "Human-readable gender"
      - name: ssn
        description: "Survivorship-resolved SSN"
      - name: match_confidence
        description: "MDM match confidence score (0-100)"
      - name: is_active
        description: "Whether the golden record is currently active"

  - name: stg_mdm__golden_provider
    description: >
      Staging model for MDM-mastered provider golden records.
      Contains survivorship-resolved provider data from all source systems.
    columns:
      - name: golden_provider_id
        description: "{{ doc('golden_provider_id') }}"
        tests:
          - not_null
          - unique
      - name: provider_name
        description: "Survivorship-resolved provider name"
      - name: npi
        description: "{{ doc('npi') }}"
      - name: tax_id
        description: "Survivorship-resolved Tax ID"
      - name: provider_type_code
        description: "Provider type classification code"
      - name: primary_specialty_code
        description: "Primary specialty taxonomy code"
      - name: match_confidence
        description: "MDM match confidence score (0-100)"
      - name: is_active
        description: "Whether the golden record is currently active"

  - name: stg_mdm__member_crosswalk
    description: >
      Maps source system member IDs to MDM golden member IDs.
      Enables resolution of any source member ID to the mastered identity.
    columns:
      - name: crosswalk_id
        description: "Unique crosswalk record identifier"
        tests:
          - not_null
          - unique
      - name: golden_member_id
        description: "{{ doc('golden_member_id') }}"
        tests:
          - not_null
      - name: source_system
        description: "Source system code (QNXT, LABS, CRM, etc.)"
        tests:
          - not_null
      - name: source_member_id
        description: "Member ID in the source system"
        tests:
          - not_null
      - name: match_confidence
        description: "Confidence score for this link (0-100)"
      - name: match_rule
        description: "MDM rule that created this link"
      - name: is_primary
        description: "Whether this is the primary source for this golden record"
      - name: is_active
        description: "Whether this crosswalk link is currently active"

  - name: stg_mdm__provider_crosswalk
    description: >
      Maps source system provider IDs to MDM golden provider IDs.
      Enables resolution of any source provider ID to the mastered identity.
    columns:
      - name: crosswalk_id
        description: "Unique crosswalk record identifier"
        tests:
          - not_null
          - unique
      - name: golden_provider_id
        description: "{{ doc('golden_provider_id') }}"
        tests:
          - not_null
      - name: source_system
        description: "Source system code (QNXT, CAQH, NPPES, etc.)"
        tests:
          - not_null
      - name: source_provider_id
        description: "Provider ID in the source system"
        tests:
          - not_null
      - name: match_confidence
        description: "Confidence score for this link (0-100)"
      - name: match_rule
        description: "MDM rule that created this link"
      - name: is_primary
        description: "Whether this is the primary source for this golden record"
      - name: is_active
        description: "Whether this crosswalk link is currently active"
